extends template

block content

	.container-fluid
		header
			.container
				h1 Professional Journal
				ul.nav.nav-tabs.nav-fill
					li.nav-item
						a.nav-link(href='/journals') Journals
					li.nav-item
						a.nav-link(href='/search') Search
					li.nav-item.dropdown
						a.nav-link.dropdown-toggle.active(data-toggle='dropdown', href='#', role='button', aria-haspopup='true', aria-expanded='false') My Account
						.dropdown-menu
							a.dropdown-item(href='#') Profile
							.dropdown-divider
							a.dropdown-item(href='#') Sign Out
		.panel
			.heading
				| Your Details
			.body.alignCenter
				.container
					ul.nav.nav-tabs.nav-fill
						li.nav-item
							a.nav-link(href='/profile-details') Change Details
						li.nav-item.bold
							a.nav-link().active Change Password
					form.formInput(action='/profile-password', method= 'post')
						br
						label(for='oldPassword' style='font-weight: bold') Old Password
						br
						input(type='password', name='oldpassword')
						br
						label(for='newPassword' style='font-weight: bold') New Password
						br
						input(type='password', name='newpassword')
						br
						label(for='newPasswordConfirm' style='font-weight: bold') Confirm New Password
						br
						input(type='password', name='newpasswordconfirm')
						br
						br
						button#registerBtn.btn.btn-primary(type='submit') Change Password
	script.
		$(document).ready(function () {
			SetContrast("#{user.colour_choice}");

			function HexToRgb(hex) {
				var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
				return result ? {
					r: parseInt(result[1], 16),
					g: parseInt(result[2], 16),
					b: parseInt(result[3], 16)
				} : null;
			}

			function SetContrast(hex) {

				var red = HexToRgb(hex).r;
				var green = HexToRgb(hex).g;
				var blue = HexToRgb(hex).b;
				var o = Math.round(((red * 299) +
					(green * 587) +
					(blue * 114)) / 1000);
				console.log(o);

				var fore = (o > 125) ? 'black' : 'white';
				var back = 'rgb(' + red + ',' + green + ',' + blue + ')';

				$('.heading').css('color', fore);
				$('.heading').css('background-color', back);
			}
		});